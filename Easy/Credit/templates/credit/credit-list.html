{% extends "base/base.html" %}
{% block content %}
      {% load static %}
      <style>
            .btn-nav .btn-creditos img
            {
                  /* background-color: #eeeeee !important; */
                  box-shadow: #d1cfcf 0px 0px 10px 0px;
                  border: 1px solid #eeeeee;
            }
            .section-list {
                  font-size: 14px;
            }
      .table {
              display: table;
              width: 100%;
      }

      .thead {
              display: table-header-group;

              color: var(--text-light);
              font-weight: bold;
      }

      .tbody {
              display: table-row-group;
      }

      .tr {
              display: table-row;
      }

      .th, .td {
              display: table-cell;
              padding: 0.5rem;
              text-align: center;
      }

.th
{
              text-transform: uppercase;
              font-size: 12px;
            width: 8rem;
            background-color: rgb(255, 255, 255) !important;
            margin: 0.2rem;
      }

      .td {
            background-color: rgb(255, 255, 255) !important;
            color: #343434 !important;
            margin: 0.2rem; border-radius: 0.5rem;
            width: 8rem;
            height: 3rem;
            display: flex; flex-wrap: wrap; 
            align-content: center; justify-content: center;
      }
      .td a {
              text-decoration: none;
      }

      .td a:hover {
              text-decoration: underline;
      }

      .btn {
              display: flex;
              align-items: center;
              justify-content: center;
      }
      </style>
      <section class="section-list">
            <a href="{% url "credit:credit-create" %}">
                  <button class="position-absolute top-0 mt-2 end-0  border-0 p-0 rounded-circle " style="width: 40px; height: 40px; background-color: var(--bg-2); margin-right: 0.6rem;"> 
                        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-plus-circle-fill m-0 p-0 text-primary" viewBox="0 0 16 16">
                              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
                        </svg>
                  </button>
            </a>
            <div class=" p-2 rounded-5 ">
                    <div class="table mt-1 table-striped table-hover">
                              <div class="thead">
                                      <div class="tr d-flex bg-white">
                                                <span class="th flex-fill">Cliente</span>
                                                <span class="th flex-fill">Capital</span>
                                                <span class="th flex-fill">Cuotas</span>
                                                <span class="th flex-fill">Intereses</span>
                                                <span class="th flex-fill">Frecuencia</span>
                                                <span class="th flex-fill">Fecha de Inicio</span>
                                                <span class="th flex-fill">MÃ©todo de Pago</span>
                                                <span class="th flex-fill">Acciones</span>
                                      </div>
                              </div>
                              <div class="tbody">
                                      {% if credits %}
                                                {% for credit in credits %}
                                                <div class="tr d-flex">
                                                        <span class="td flex-fill" style="width: 10rem;">
                                                                  <a href="{% url "credit:credit-detail" credit.id %}" style="cursor: pointer;" class="text-black align-content-center">
                                                                          <img src="{{request.user.more.img.url}}"    class="  object-fit-cover rounded-circle " style="border: 1px; width: 40px; height: 40px; border: 4px solid white; " alt="">
                                                                       <span class="d-flex flex-wrap align-content-center ms-2">
                                                                        {{ credit.client.name|default:"..."|slice:":5" }}     
                                                                        {{ credit.client.last_name|default:"..."|slice:":5" }}
                                                                       </span>
                                                                  </a>
                                                        </span>
                                                        <span class="td flex-fill">${{ credit.capital }}</span>
                                                        <span class="td flex-fill">{{ credit.cuotas }}</span>
                                                        <span class="td flex-fill">{{ credit.intereses }}%</span>
                                                        <span class="td flex-fill text-capitalize">{{ credit.frecuencia }}</span>
                                                        <span class="td flex-fill">{{ credit.start_date|date:"d/m/Y" }}</span>
                                                        <span class="td flex-fill text-capitalize">{{ credit.metodo }}</span>
                                                        <span class="td flex-fill d-flex">
                                                                  <a href="{% url 'credit:credit-delete' credit.id %}" class="">
                                                                        <button class="btn rounded-5 btn-sm" style=""> -
                                                                              Eliminar       
                                                                        </button>
                                                                  </a>
                                                        </span>
                                                </div>
                                                {% endfor %}
                                      {% else %}
                                                <div class="tr d-flex">
                                                        <span class="td flex-fill text-black-50" style="text-align: center; font-weight: bold;" colspan="8">
                                                                  No hay creditos
                                                        </span>
                                                </div>
                                      {% endif %}
                              </div>
                    </div>
            </div>
      </section>
{% endblock %}